<!DOCTYPE html>
<html>
  <head>
    <title>Home</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "bootstrap", media: "all" %>
     <%= stylesheet_link_tag "showClient", media: "all" %>
    <%= stylesheet_link_tag "product", media: "all" %>
    <%= stylesheet_link_tag "home", media: "all" %>
    <%= javascript_include_tag "home", defer: true %>
    <script src="https://kit.fontawesome.com/ca178badbf.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    
  </head>

  <body>
    <main>
        <aside class="d-flex">
            <div class="p-2" id="logo">
                <%= image_tag "ale_logo.jpg", class: "logo-img" %>
                <label class="">Ale beauty art</label>
            </div>
            <div class="p-2" id="lnks">

                <%= link_to home_path do%>
                    <button class="btn-recargar active menu-btn" class="btn-recargar" onclick="changeColor(this)">
                        <span class="left">
                            <i class="fa-solid fa-house"></i>
                            <span class="label">Home</span>
                            
                        </span>
                    </button>
                <% end %>
                
                <div class="sect">
                    <button class="toggle-btn menu-btn">
                        <span class="left">
                            <i class="fa-regular fa-folder"></i>
                            <span class="label">Productos</span>
                        </span>
                        <i class="fa-solid fa-chevron-down fa-xs chevron-icon"></i>
                    </button>
                    <div class="content">
                        <%= link_to products_path do%>
                            <button class="btn-recargar" onclick="changeColor(this)">
                                | Ver Productos
                            </button>
                        <% end %>
                        
                        <%= link_to new_product_path do%>
                            <button class="btn-recargar" onclick="changeColor(this)">
                                | Agregar Producto
                            </button>
                        <% end %>
                    </div>
                </div>
                <div class="section">
                    <button class="toggle-btn menu-btn">
                        <span class="left">
                            <i class="fa-regular fa-folder"></i>
                            <span class="label">Categorias</span>
                        </span>
                        <i class="fa-solid fa-chevron-down fa-xs chevron-icon"></i>
                    </button>
                    <div class="content">
                        <%= link_to categories_path do%>
                            <button class="btn-recargar" onclick="changeColor(this)">
                                | Ver Categorias
                            </button>
                        <% end %>

                        <%= link_to new_category_path do%>
                            <button class="btn-recargar" onclick="changeColor(this)">
                                | Agregar Categoria
                            </button>
                        <% end %>
                    </div>
                </div>
                <div class="section">
                    <button class="toggle-btn menu-btn">
                        <span class="left">
                            <i class="fa-regular fa-folder"></i>
                            <span class="label">Inicio</span>
                        </span>
                        <i class="fa-solid fa-chevron-down fa-xs chevron-icon"></i>
                    </button>
                    <div class="content">

                        <%= link_to edit_carousel_path do%>
                            <button class="btn-recargar" onclick="changeColor(this)">
                                | Carousel
                            </button>
                        <% end %>

                    </div>
                </div>
            </div>
            <div class="mt-auto p-2" id="sttgs">
                <span class="left">
                    <%= button_to "<i class='fas fa-sign-out-alt'></i> Cerrar sesiÃ³n".html_safe, destroy_user_session_path, method: :delete, class: "logout" %>
                </span>
            </div>
        </aside>
        <section id="nvg">
            <nav class="navbar bg-body-tertiary">
            
                <% if controller_name == 'products' %>
                    <%= render 'products/productos_nav' %>
                <% else %>
                    <div class="container-fluid">
                        <a class="navbar-brand">
                        <strong>Welcome, <label><%= current_user.nombre%></label></strong>
                        </a>
                        <form class="d-flex input-group w-auto">
                        <input
                            type="search"
                            class="form-control rounded"
                            placeholder="Search"
                            aria-label="Search"
                            aria-describedby="search-addon"
                        />
                        <span class="input-group-text border-0" id="search-addon">
                            <i class="fas fa-search"></i>
                        </span>
                        </form>
                    </div>
                <% end %>

                
            </nav>

            <section id="refresh">
                <%= yield%>
               
            </section>
        </section>

        <div id="flash-message-container">
            <% if notice %>
                <div id="flash-message" class="alerta alert-success">
                <%= notice %>
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                </div>
            <% end %>

            <% if alert %>
                <div id="flash-message-alert" class="alerta alert-danger"> <%# Usa una ID diferente para el alert si vas a actualizarlo por separado con Turbo Stream %>
                <%= alert %>
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                </div>
            <% end %>

            <% if flash[:error] %>
                <div id="flash-message-error" class="alerta alert-error">
                <%= flash[:error] %>
                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
                </div>
            <% end %>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
  </body>
</html>
