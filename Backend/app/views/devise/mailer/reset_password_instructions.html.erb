<!-- HTML mail for Devise reset password -->
<!-- Uses ENV['FRONTEND_URL'] and ERB::Util.url_encode(@token) / @resource.email -->
<table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="background-color:#f5f5f7; padding:0; margin:0;">
  <tr>
    <td align="center">
      <!-- Outer container -->
      <table role="presentation" width="600" cellspacing="0" cellpadding="0" border="0" style="max-width:600px; margin:0 auto; background:#ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; color:#333;">
        <!-- Banner -->
        <tr>
          <td style="background:#fb73a9; padding:28px 20px; text-align:center;">
            <img src="https://raw.githubusercontent.com/JesusSoto7/proyecto-ale-beauty-art/refs/heads/main/Backend/app/assets/images/ale_logo.jpg"
                 alt="Ale Beauty Art" width="84" height="84" style="border-radius:50%; border:3px solid #fff; display:block; margin:0 auto;">
          </td>
        </tr>

        <!-- Wave / SVG separator -->
        <tr>
          <td style="padding:0; margin:0;">
            <svg viewBox="0 0 1440 80" width="100%" height="40" style="display:block;">
              <path fill="#ffffff" d="M0,32L60,42C120,52,240,72,360,69.3C480,67,600,43,720,48C840,53,960,87,1080,90C1200,93,1320,67,1380,53L1440,40L1440,80L0,80Z"/>
            </svg>
          </td>
        </tr>

        <!-- Main content -->
        <tr>
          <td style="padding:28px 34px 12px 34px; text-align:left;">
            <h1 style="margin:0 0 10px 0; font-size:22px; color:#202020;">Restablece tu contraseña</h1>
            <p style="margin:0 0 18px 0; font-size:15px; color:#555;">
              Hola, <strong style="color:#fb73a9;"><%= @resource.email %></strong>,
            </p>

            <p style="margin:0 0 22px 0; font-size:15px; color:#555;">
              Alguien solicitó un enlace para cambiar la contraseña de tu cuenta. Si fuiste tú, pulsa el botón de abajo para elegir una contraseña nueva. Este enlace expira pasadas unas horas.
            </p>

            <!-- CTA button -->
            <div style="text-align:center; margin:26px 0;">
              <a
                href="<%= "#{ENV.fetch('FRONTEND_URL')}/es/reset-password?reset_password_token=#{ERB::Util.url_encode(@token)}&email=#{ERB::Util.url_encode(@resource.email)}" %>"
                style="background:#fb73a9; color:#ffffff; text-decoration:none; padding:12px 22px; border-radius:8px; display:inline-block; font-weight:600; font-size:15px;">
                Restablecer contraseña
              </a>
            </div>

            <!-- Fallback link -->
            <p style="margin:0 0 18px 0; font-size:13px; color:#888;">
              Si el botón no funciona, copia y pega esta URL en tu navegador:
            </p>
            <p style="word-break:break-all; font-size:13px; color:#0b5bd7; margin-bottom:8px;">
              <a href="<%= "#{ENV.fetch('FRONTEND_URL')}/es/reset-password?reset_password_token=#{ERB::Util.url_encode(@token)}&email=#{ERB::Util.url_encode(@resource.email)}" %>" style="color:#0b5bd7; text-decoration:underline;">
                <%= "#{ENV.fetch('FRONTEND_URL')}/es/reset-password?reset_password_token=#{ERB::Util.url_encode(@token)}&email=#{ERB::Util.url_encode(@resource.email)}" %>
              </a>
            </p>

            <hr style="border:none; border-top:1px solid #eee; margin:20px 0;">

            <p style="margin:0; font-size:13px; color:#777;">
              Si no solicitaste este cambio, puedes ignorar este correo y tu contraseña no cambiará.
            </p>
          </td>
        </tr>

        <!-- Footer -->
        <tr>
          <td style="padding:18px 34px 28px 34px; text-align:center; color:#999; font-size:13px;">
            <p style="margin:6px 0 2px 0;">Ale Beauty Art</p>
            <p style="margin:0;"><small>© <%= Time.current.year %> Ale Beauty Art. Todos los derechos reservados.</small></p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>