<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Address</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <%= stylesheet_link_tag "direcciones", media: "all", "data-turbo-track": "reload" %>
  </head>
  <body>
<section class="stp1  container py-5">
  <h2 class="mb-4 fw-bold">Tu Direcci贸n</h2>

  <%= form_with(model: @shipping_address, local: true, class: "needs-validation") do |form| %>
    
    <% if @shipping_address.errors.any? %>
      <div class="alert alert-danger">
        <h4><%= pluralize(@shipping_address.errors.count, "error") %> La direcci贸n no pudo ser agregada</h4>
        <ul>
          <% @shipping_address.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="row g-3">
      <div class="col-md-6">
        <%= form.label :nombre, "Nombre", class: "form-label" %>
        <%= form.text_field :nombre, class: "form-control", placeholder: "John" %>
      </div>
      <div class="col-md-6">
        <%= form.label :apellido, "Apellido", class: "form-label" %>
        <%= form.text_field :apellido, class: "form-control", placeholder: "Terner" %>
      </div>

      <div class="col-md-6">
        <%= form.label :telefono, "Telefono", class: "form-label" %>
        <%= form.text_field :telefono, class: "form-control", placeholder: "123-456-7890" %>
      </div>

      <% unless user_signed_in? %>
        <div class="col-md-6">
          <label for="email" class="form-label">Correo electr贸nico</label>
          <input type="email" name="email" id="email" class="form-control" required>
        </div>
      <% end %>

      <div class="col-12">
        <%= form.label :direccion, "Direcci贸n", class: "form-label" %>
        <%= form.text_field :direccion, class: "form-control", placeholder: "380-394 11th Ave, NY 10001" %>
      </div>

      <div class="col-md-6">
        <%= form.label :department_id, "Departamento", class: "form-label" %>
        <%= select_tag :department_id,
            options_from_collection_for_select(Department.all, :id, :nombre),
            prompt: "Seleccione un departamento",
            class: "form-select" %>
      </div>

      <div class="col-md-6">
        <%= form.label :municipality_id, "Municipio", class: "form-label" %>
        <%= select_tag :municipality_id,
            "",
            prompt: "Seleccione un municipio",
            class: "form-select" %>
      </div>

      <div class="col-md-6">
        <%= form.label :shipping_address_neighborhood_id, "Barrio", class: "form-label" %>
        <%= form.collection_select :neighborhood_id,
            [],
            :id,
            :nombre,
            prompt: "Seleccione un barrio",
            class: "form-select" %>
      </div>

      <div class="col-md-6">
        <%= form.label :codigo_postal, "Codigo Postal (optional)", class: "form-label" %>
        <%= form.number_field :codigo_postal, class: "form-control" %>
      </div>

      <div class="col-12">
        <%= form.label :indicaciones_adicionales, "informacion adicional (optional)", class: "form-label" %>
        <%= form.text_area :indicaciones_adicionales, class: "form-control" %>
      </div>

      <div class="col-12 mt-4">
        <%= form.submit "Continuar", class: "btn btn-primary w-100" %>
      </div>
    </div>

  <% end %>
</section>
</body> 
</html>
